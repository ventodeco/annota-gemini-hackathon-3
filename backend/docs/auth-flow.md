# Authentication Flow

## Login API

| Action | GET |  |
| --- | --- | --- |
| Endpoint | /v1/auth/google/state |  |

Response: 200

```c
{
	"ssoRedirection": "{url}" // redirection into google
}
```

Logic:

2. Backend
    1. Save the state in redis
    2. Generate google redirection url
    3. Return response

## **Callback Google SSO API [from Google]**

| Action | GET |
| --- | --- |
| Endpoint | /v1/auth/google/callback |
| Query Params | - state: this field is used for states that are generated by BE while getting the state
- code: this field given by google itself |

High Level Flow

![image.png](attachment:a3b934f6-bb86-4da6-b567-68268b67dec3:image.png)

## **Callback Google SSO API [FE to Backend]**

| Action | POST |
| --- | --- |
| Endpoint | /v1/auth/google/callback |

Body Request

```c
{
	"code": "{code}"
}
```

Response: 200

```c
{
	"token": "{user token}",
  "expirySeconds": "360000",
  "expiresAt": "1761789685"
}
```

Logic:

- Frontend
    - Frontend will get the callback from Google, and check if the state has the same state as session storage. Then we need to pass-through into Backend
- Backend
    - Check is the state valid
    - Validate the code to google
    - Get user info from google
    - Check user to db
    - Generate token and give response

